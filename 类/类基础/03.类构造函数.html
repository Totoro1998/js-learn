<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /**
       * 使用 new 调用类的构造函数会执行如下操作。
       * (1) 在内存中创建一个新对象。
       * (2) 这个新对象内部的[[Prototype]]指针被赋值为构造函数的 prototype 属性。
       * (3) 构造函数内部的 this 被赋值为这个新对象（即 this 指向新对象）。
       * (4) 执行构造函数内部的代码（给新对象添加属性）。
       * (5) 如果构造函数返回非空对象，则返回该对象；否则，返回刚创建的新对象。
       */
      class Person {
        constructor(override) {
          this.foo = "foo";
          if (override) {
            return {
              bar: "bar",
            };
          }
        }
      }
      let p1 = new Person(),
        p2 = new Person(true);
      console.log(p1); // Person{ foo: 'foo' }
      console.log(p1 instanceof Person); // true
      console.log(p2); // { bar: 'bar' }
      console.log(p2 instanceof Person); // false
    </script>
  </body>
</html>
